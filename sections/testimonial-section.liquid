{% stylesheet %}
.testimonial-wrapper {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 30px;
  padding: 50px 20px;
  background-color: #f9f9f9;
}

.testimonial-left {
  flex: 1;
}

.testimonial-left h2 {
  font-size: 32px;
  font-weight: 700;
  margin-bottom: 20px;
}

.testimonial-left .nav-buttons {
  margin-top: 30px;
}

.testimonial-left .nav-buttons button {
  background: none;
  border: 1px solid red;
  color: red;
  padding: 8px 14px;
  margin-right: 10px;
  cursor: pointer;
}

.testimonial-carousel {
  flex: 2;
}

.testimonial-item {
  background: white;
  padding: 30px;
  border-radius: 10px;
  margin: 10px;
}

.testimonial-item .quote {
  font-size: 22px;
  color: #f33;
}

.testimonial-item .stars {
  color: orange;
  margin-bottom: 10px;
}

.testimonial-meta {
  margin-top: 15px;
  display: flex;
  align-items: center;
  gap: 10px;
}
{% endstylesheet %}

<div class="testimonial-wrapper">
  <div class="testimonial-left">
    <h2>{{ section.settings.heading }}</h2>
    <div class="nav-buttons">
      <button id="testimonial-prev">←</button>
      <button id="testimonial-next">→</button>
    </div>
  </div>

  <div class="testimonial-carousel owl-carousel">
    {% for block in section.blocks %}
      <div class="testimonial-item">
        <div class="quote">❝</div>
        <div class="stars">★★★★★</div>
        <p>{{ block.settings.text }}</p>
        <div class="testimonial-meta">
          <img src="{{ block.settings.image | image_url }}" alt="{{ block.settings.name }}" style="width: 40px; height: 40px; border-radius: 50%;">
          <div>
            <strong>{{ block.settings.name }}</strong><br>
            <small>{{ block.settings.designation }}</small>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
</div>
<script src="{{ 'jquery-3.6.0.min.js' | asset_url }}" defer="defer"></script>

{% javascript %}
  jQuery(document).ready(function () {
    jQuery('.testimonial-carousel').owlCarousel({
      loop: true,
      margin: 20,
      nav: false,
      dots: false,
      items: 1
    });

    jQuery('#testimonial-prev').click(function () {
      jQuery('.testimonial-carousel').trigger('prev.owl.carousel');
    });

    jQuery('#testimonial-next').click(function () {
      jQuery('.testimonial-carousel').trigger('next.owl.carousel');
    });
  });
{% endjavascript %}

{% schema %}
{
  "name": "Testimonial Section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Left Side Heading",
      "default": "What They’re Talking About Company?"
    }
  ],
  "blocks": [
    {
      "type": "testimonial",
      "name": "Testimonial",
      "settings": [
        {
          "type": "textarea",
          "id": "text",
          "label": "Testimonial Text"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Person Image"
        },
        {
          "type": "text",
          "id": "name",
          "label": "Name"
        },
        {
          "type": "text",
          "id": "designation",
          "label": "Designation"
        }
      ]
    }
  ],
  "max_blocks": 10,
  "presets": [
    {
      "name": "Testimonial Section",
      "category": "Custom"
    }
  ]
}
{% endschema %}
